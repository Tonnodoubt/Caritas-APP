# 📝 笔记功能运行步骤

## ✅ 第一步：检查依赖（已完成）

我已经手动添加了 `NoteAdapter` 到 `DbHelper.g.dart` 文件中，所以**可以跳过 build_runner 步骤**。

## 🚀 第二步：直接运行应用

### 方法 1：在 Android Studio 中运行

1. 打开 Android Studio
2. 打开项目 `Caritas-APP`
3. 等待索引完成（右下角会显示进度）
4. 连接设备或启动模拟器
5. 点击绿色的运行按钮（▶️）或按 `Shift + F10`

### 方法 2：在 VS Code 中运行

1. 打开 VS Code
2. 打开项目文件夹
3. 按 `F5` 或点击运行按钮
4. 选择运行设备

### 方法 3：使用命令行

```powershell
# 在项目根目录下
flutter run
```

## 🧪 第三步：测试笔记功能

### 测试流程：

1. **打开应用**
   - 应用启动后，进入首页

2. **打开一篇文章**
   - 点击任意文章进入阅读页面

3. **添加第一条笔记**
   - 点击右上角的 📝 图标（笔记按钮）
   - 在弹出的对话框中：
     - 输入要标注的文本（例如：从文章中复制一段文字粘贴进去）
     - 输入笔记内容（你的想法或备注）
     - 选择一个高亮颜色
     - 点击"添加"按钮

4. **查看笔记**
   - 在文章页面底部，应该能看到你刚添加的笔记卡片
   - 笔记卡片会显示：
     - 高亮颜色的左侧边框
     - 你标注的文本（带背景色）
     - 你的笔记内容

5. **查看所有笔记**
   - 打开侧边栏（左上角菜单图标）
   - 点击"笔记"选项
   - 应该能看到所有笔记的列表

6. **编辑笔记**
   - 在笔记列表或文章页面，点击笔记卡片
   - 可以修改笔记内容和颜色
   - 点击"保存"

7. **删除笔记**
   - 在笔记列表页面，点击笔记卡片的菜单按钮（三个点）
   - 选择"删除"

## ⚠️ 如果遇到问题

### 问题 1：应用无法启动

**检查**：
- Flutter SDK 是否正确安装
- 设备/模拟器是否连接
- 运行 `flutter doctor` 检查环境

### 问题 2：笔记功能报错

**检查**：
- 查看控制台错误信息
- 确认 `DbHelper.g.dart` 文件中有 `NoteAdapter` 类
- 确认 `InitUtil.dart` 中注册了 `NoteAdapter()`

### 问题 3：笔记无法保存

**检查**：
- 设备存储权限
- 查看控制台是否有错误
- 尝试重启应用

## 📋 功能验证清单

运行应用后，请验证以下功能：

- [ ] 应用可以正常启动
- [ ] 可以打开文章
- [ ] 可以点击笔记按钮
- [ ] 可以添加笔记
- [ ] 笔记显示在文章底部
- [ ] 可以通过侧边栏进入笔记列表
- [ ] 可以编辑笔记
- [ ] 可以删除笔记
- [ ] 笔记数据持久化（重启应用后还在）

## 🎉 完成！

如果所有功能都正常，恭喜你！笔记功能已经成功集成到应用中。

## 💡 使用技巧

1. **快速添加笔记**：
   - 在文章中长按选择文本
   - 复制文本
   - 点击笔记按钮
   - 粘贴文本并添加笔记

2. **颜色选择**：
   - 黄色：重要内容
   - 红色：需要关注
   - 青色：有趣的点
   - 其他颜色：按需使用

3. **笔记管理**：
   - 使用搜索功能快速找到笔记
   - 通过"打开文章"快速跳转到原文
   - 定期整理和删除不需要的笔记

